import javafx.application.Application;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.layout.VBox;
import javafx.stage.Stage;

/**
 * Main class to start the Snake game.
 * It initializes the main menu and handles user input for starting the game.
 */
public class Main extends Application {
    @Override
    public void start(Stage primaryStage) {
        // Create the main menu with start and exit buttons
        Button startButton = new Button("Start Game");
        Button exitButton = new Button("Exit");
        VBox mainMenu = new VBox(10, startButton, exitButton);
        mainMenu.setPrefSize(600, 600);

        Scene menuScene = new Scene(mainMenu);
        primaryStage.setScene(menuScene);
        primaryStage.setTitle("Snake Game");

        // Set actions for the buttons
        startButton.setOnAction(event -> startGame(primaryStage));
        exitButton.setOnAction(event -> primaryStage.close());

        primaryStage.show();
    }

    /**
     * Starts the game by setting the game scene and initializing game controls.
     * 
     * @param primaryStage The primary stage for the application.
     */
    private void startGame(Stage primaryStage) {
        Game game = new Game();
        Scene gameScene = new Scene(game.getGameBoard().getPane(), 600, 600);

        // Set key press events for controlling the snake and pausing the game
        gameScene.setOnKeyPressed(event -> {
            switch (event.getCode()) {
                case UP -> game.getSnake().setDirection(Direction.UP);
                case DOWN -> game.getSnake().setDirection(Direction.DOWN);
                case LEFT -> game.getSnake().setDirection(Direction.LEFT);
                case RIGHT -> game.getSnake().setDirection(Direction.RIGHT);
                case P -> game.togglePause();
            }
        });

        primaryStage.setScene(gameScene);
        primaryStage.show();
        game.start();
    }

    public static void main(String[] args) {
        launch(args);
    }
}
